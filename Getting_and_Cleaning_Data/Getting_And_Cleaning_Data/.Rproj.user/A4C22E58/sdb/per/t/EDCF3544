{
    "contents" : "library(RCurl)\nlibrary(plyr)\nlibrary(reshape2)\n\n## Download data from the internet if not in data directory\nif(!file.exists(\"./data\")){dir.create(\"./data\")}\nfileUrl <- paste0(\"https://d396qusza40orc.cloudfront.net/\",\n          \"getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip\") \ndestFile <- \"./data/dataset.zip\"\nif(!file.exists(destFile)){\n     download.file(fileUrl, destfile=destFile, method=\"curl\")\n}\n\n## Unzip the dataset.zip file in the data directory\nunzip(\"./data/dataset.zip\", exdir=\"./data\")\n\n## Set the root directory of the unzipped data set\nDataRoot <- \"./data/UCI HAR Dataset/\"\n\n## Read in the test data\n.TestDir <- paste0(DataRoot,\"test/\")\n.xTestFile <- paste0(.TestDir,\"X_test.txt\")\n.yTestFile <- paste0(.TestDir,\"y_test.txt\")\n.SubjectTestFile <- paste0(.TestDir,\"subject_test.txt\")\nSubjectTestData <- read.table(.SubjectTestFile, col.names=\"SubjectID\")\nxTestData <- read.table(.xTestFile)\nyTestData <- read.table(.yTestFile, col.names=\"Activity\")\n\n## Read in the train data\n.TrainDir <- paste0(DataRoot,\"train/\")\n.xTrainFile <- paste0(.TrainDir,\"X_train.txt\")\n.yTrainFile <- paste0(.TrainDir,\"y_train.txt\")\n.SubjectTrainFile <- paste0(.TrainDir,\"subject_train.txt\")\nSubjectTrainData <- read.table(.SubjectTrainFile, col.names=\"SubjectID\")\nxTrainData <- read.table(.xTrainFile)\nyTrainData <- read.table(.yTrainFile, col.names=\"Activity\")\n\n## Read in activity labels and feature names\n.ActivityFile <- paste0(DataRoot,\"activity_labels.txt\")\nActivityLabels <- read.table(.ActivityFile,\n                             col.names=c(\"ActivityLevel\", \"ActivityLabel\"))\n.FeatureNameFile <- paste0(DataRoot,\"features.txt\")\nFeatureNames <- read.table(.FeatureNameFile,\n                           col.names=c(\"FeatureID\",\"FeatureName\"))\n\n## Replace the column names in the x data with the feature names\n## from the FeatureNameFile\ncolnames(xTestData) <- FeatureNames$FeatureName\ncolnames(xTrainData) <- FeatureNames$FeatureName\n\n## Merge the y data with the activity labels\nyTrainData <- merge(yTrainData,\n                    ActivityLabels,\n                    by.x=\"Activity\", by.y=\"ActivityLevel\",all=TRUE)\nyTestData <- merge(yTestData,\n                    ActivityLabels,\n                    by.x=\"Activity\", by.y=\"ActivityLevel\",all=TRUE)\n\n## Column bind the test and train data into combined data sets\nTrainData <- cbind(SubjectTrainData, yTrainData, xTrainData)\nTestData <- cbind(SubjectTestData, yTestData, xTestData)\n\n## Remove the Activity column and rename ActivityLabel to Activity\nTrainData <- subset(TrainData, select =-Activity)\nTestData <- subset(TestData, select =-Activity)\nnames(TrainData)[names(TrainData)==\"ActivityLabel\"]<-\"Activity\"\nnames(TestData)[names(TestData)==\"ActivityLabel\"]<-\"Activity\"\n\n## Merge the train and test data\n# CompleteData<- merge(TrainData,TestData,\n#                      by.x=\"SubjectID\",by.y=\"SubjectID\",all=TRUE)\nCompleteData<- merge(TrainData,TestData,all=TRUE)\nCompleteData <- CompleteData[order(CompleteData$SubjectID,\n                                   CompleteData$Activity),]\n\n## Convert the subject ID to factor\nCompleteData$SubjectID <- factor(CompleteData$SubjectID)\n\n## First remove hyphens and parentheses.  Then,find the column numbers of the \n## variables that have \"mean\" and \"std\" in their name\nColumnNames <- gsub(\"\\\\(\\\\)\",\"\",names(CompleteData))\nColumnNames <- gsub(\"-\",\"\",ColumnNames)\nColumnNames <- gsub(\"mean\",\"Mean\",ColumnNames)\nColumnNames <- gsub(\"std\",\"Std\",ColumnNames)\nmeanHeadings <- grep(\"Mean\",ColumnNames)\nstdHeadings <- grep(\"Std\",ColumnNames)\ndesiredColumns <- sort(c(1,2,meanHeadings,stdHeadings))\ncolnames(CompleteData) <- ColumnNames\n\n## Create subset of CompleteData with only the desired columns\nFirstDataSet <- CompleteData[,desiredColumns]\n## Remove columns with angle in title\nAngleHeadings <- grep(\"angle\",names(FirstDataSet))\nFirstDataSet <- subset(FirstDataSet, select =-AngleHeadings)\n\n## Write FirstDataSet as CSV file to disk into project directory\nwrite.csv(FirstDataSet, file = \"./firstdataset.txt\")\n\n## Get column names for ID and varables to melt the FirstDataSet\nIDCols = names(FirstDataSet)[1:2]\nnumColsData = ncol(FirstDataSet)\nVarCols = names(FirstDataSet)[3:numColsData]\n\n## Melt the FirstDataSet\nmeltData <- melt(FirstDataSet,id=IDCols,measure.vars=VarCols)\n\n## Generate table with summary of mean values per SubjectId and Activity\n## for each variable\nSummaryData <- ddply(meltData, .(SubjectID,Activity,variable),\n                     summarize, mean=mean(value))\n\n## Write the mean summarized data set as CSV to disk in project directory\nwrite.csv(SummaryData, file = \"./MeanSummaryDataSet.txt\")\n\n",
    "created" : 1402337240484.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2847717583",
    "id" : "EDCF3544",
    "lastKnownWriteTime" : 1402762750,
    "path" : "~/Documents/School/John's Hopkins Data Science/GettingAndCleaningData/run_analysis.R",
    "project_path" : "run_analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : true,
    "type" : "r_source"
}